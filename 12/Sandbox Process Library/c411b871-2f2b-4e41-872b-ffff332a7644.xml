<?xml version="1.0" encoding="UTF-8" standalone="yes"?><bns:Component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bns="http://api.platform.boomi.com/" folderFullPath="Cgfns International, Inc./Sandbox Process Library" componentId="c411b871-2f2b-4e41-872b-ffff332a7644" version="1" name="Database Basics: Simple Insert, Update Examples" type="process" createdDate="2019-08-21T18:28:42Z" createdBy="gtopakas@cgfns.org" modifiedDate="2019-08-21T18:28:42Z" modifiedBy="gtopakas@cgfns.org" deleted="false" currentVersion="true" folderName="Sandbox Process Library" folderId="RjoyNjI3MDU5" copiedFromComponentId="ee1a39ee-8725-40ea-ab52-2b74d6201bda" copiedFromComponentVersion="4" branchName="main" branchId="QjoyNDQyNTI"><bns:encryptedValues/><bns:description>This process demonstrates two options for inserting and updating records into a database. In the first example, incoming customer data is simply mapped directly to an "insert" profile. The profile uses a Standard Statement which means the SQL INSERT statement is defined manually. In the second example, logic is used to check if each incoming customer already exists in the destination database to determine whether to perform an insert or update. The incoming flat file data is first split by line to be able to lookup each customer individually. The Connector Call lookup is performed in the Set Properties shape and captures the returned system "CUST_ID" value in a dynamic document property to be able to reference later without performing another database call. A Decision shape then inspects whether that property has value and routes to the insert or update mapping logic. in the update path, the map retrieves the CUST_ID value from the document property. The database profile uses a Dynamic Update Statement which means the connector will auto-generate the SQL UPDATE statement for only the fields that have values. The insert path uses the same Standard Insert operation and profile from example 1.</bns:description><bns:object><process xmlns="" allowSimultaneous="false" enableUserLog="false" processLogOnErrorOnly="false" purgeDataImmediately="false" updateRunDates="false" workload="general"><shapes><shape image="start" name="shape1" shapetype="start" userlabel="(In practice source data would come from some application)" x="32.0" y="176.0"><configuration><noaction/></configuration><dragpoints><dragpoint name="shape1.dragpoint1" toShape="shape2" x="224.0" y="185.0"><linesegment length="0" name="shape1.dragpoint1.lineseg1" orient="horizontal" x="66.0" y="191.0"/><linesegment length="0" name="shape1.dragpoint1.lineseg2" orient="vertical" x="66.0" y="191.0"/><linesegment length="87" name="shape1.dragpoint1.lineseg3" orient="horizontal" x="66.0" y="191.0"/><linesegment length="0" name="shape1.dragpoint1.lineseg4" orient="vertical" x="153.0" y="191.0"/><linesegment length="71" name="shape1.dragpoint1.lineseg5" orient="horizontal" x="153.0" y="191.0"/></dragpoint></dragpoints></shape><shape image="message_icon" name="shape2" shapetype="message" userlabel="Customer Test Data" x="240.0" y="176.0"><configuration><message combined="false"><msgTxt>Customer Name*Customer Number*Account Type*Country
Mechanics, Inc.*65234*Direct*United States
Outdoor Solutions*97678*Indirect*United States
Aviation Supply*11234*Direct*Canada
Builders Depot*33200*Direct*United States
</msgTxt><msgParameters/></message></configuration><dragpoints><dragpoint name="shape2.dragpoint1" toShape="shape6" x="368.0" y="185.0"><linesegment length="0" name="shape2.dragpoint1.lineseg1" orient="horizontal" x="274.0" y="191.0"/><linesegment length="0" name="shape2.dragpoint1.lineseg2" orient="vertical" x="274.0" y="191.0"/><linesegment length="55" name="shape2.dragpoint1.lineseg3" orient="horizontal" x="274.0" y="191.0"/><linesegment length="0" name="shape2.dragpoint1.lineseg4" orient="vertical" x="329.0" y="191.0"/><linesegment length="39" name="shape2.dragpoint1.lineseg5" orient="horizontal" x="329.0" y="191.0"/></dragpoint></dragpoints></shape><shape image="map_icon" name="shape3" shapetype="map" userlabel="" x="704.0" y="64.0"><configuration><map mapId="8eeb6749-a484-4d31-abb7-d85a290e5cd2"/></configuration><dragpoints><dragpoint name="shape3.dragpoint1" toShape="shape4" x="864.0" y="73.0"><linesegment length="0" name="shape3.dragpoint1.lineseg1" orient="horizontal" x="738.0" y="79.0"/><linesegment length="0" name="shape3.dragpoint1.lineseg2" orient="vertical" x="738.0" y="79.0"/><linesegment length="71" name="shape3.dragpoint1.lineseg3" orient="horizontal" x="738.0" y="79.0"/><linesegment length="0" name="shape3.dragpoint1.lineseg4" orient="vertical" x="809.0" y="79.0"/><linesegment length="55" name="shape3.dragpoint1.lineseg5" orient="horizontal" x="809.0" y="79.0"/></dragpoint></dragpoints></shape><shape image="connectoraction_icon" name="shape4" shapetype="connectoraction" userlabel="(View Operation &gt; Profile for statement details)" x="880.0" y="64.0"><configuration><connectoraction actionType="Send" connectionId="22880955-cbe0-4c2c-b5fa-6e9864aa4b3f" connectorType="database" hideSettings="false" operationId="451ac652-09fd-4ff0-8210-5ac26de96976" parameter-profile="EMBEDDED|databaseparameterchooser|3ad61d6d-9e24-4870-9b74-61b4f8a6361d|451ac652-09fd-4ff0-8210-5ac26de96976"><parameters/></connectoraction></configuration><dragpoints><dragpoint name="shape4.dragpoint1" toShape="shape5" x="1056.0" y="73.0"><linesegment length="0" name="shape4.dragpoint1.lineseg1" orient="horizontal" x="914.0" y="79.0"/><linesegment length="0" name="shape4.dragpoint1.lineseg2" orient="vertical" x="914.0" y="79.0"/><linesegment length="79" name="shape4.dragpoint1.lineseg3" orient="horizontal" x="914.0" y="79.0"/><linesegment length="0" name="shape4.dragpoint1.lineseg4" orient="vertical" x="993.0" y="79.0"/><linesegment length="63" name="shape4.dragpoint1.lineseg5" orient="horizontal" x="993.0" y="79.0"/></dragpoint></dragpoints></shape><shape image="stop_icon" name="shape5" shapetype="stop" userlabel="" x="1072.0" y="64.0"><configuration><stop continue="true"/></configuration><dragpoints/></shape><shape image="branch_icon" name="shape6" shapetype="branch" userlabel="" x="384.0" y="176.0"><configuration><branch numBranches="2"/></configuration><dragpoints><dragpoint identifier="1" name="shape6.dragpoint1" text="1" toShape="shape17" x="512.0" y="73.0"><linesegment length="0" name="shape6.dragpoint1.lineseg1" orient="horizontal" x="418.0" y="191.0"/><linesegment length="0" name="shape6.dragpoint1.lineseg2" orient="vertical" x="418.0" y="191.0"/><linesegment length="55" name="shape6.dragpoint1.lineseg3" orient="horizontal" x="418.0" y="191.0"/><linesegment length="112" name="shape6.dragpoint1.lineseg4" orient="vertical" x="473.0" y="79.0"/><linesegment label="1" length="39" name="shape6.dragpoint1.lineseg5" orient="horizontal" x="473.0" y="79.0"/></dragpoint><dragpoint identifier="2" name="shape6.dragpoint2" text="2" toShape="shape18" x="512.0" y="297.0"><linesegment length="0" name="shape6.dragpoint2.lineseg1" orient="horizontal" x="418.0" y="191.0"/><linesegment length="0" name="shape6.dragpoint2.lineseg2" orient="vertical" x="418.0" y="191.0"/><linesegment length="55" name="shape6.dragpoint2.lineseg3" orient="horizontal" x="418.0" y="191.0"/><linesegment length="112" name="shape6.dragpoint2.lineseg4" orient="vertical" x="473.0" y="191.0"/><linesegment label="2" length="39" name="shape6.dragpoint2.lineseg5" orient="horizontal" x="473.0" y="303.0"/></dragpoint></dragpoints></shape><shape image="decision_icon" name="shape7" shapetype="decision" userlabel="Does Customer Exist?" x="1104.0" y="288.0"><configuration><decision comparison="equals" name="Does Customer Exist?"><decisionvalue valueType="track"><trackparameter defaultValue="" propertyId="dynamicdocument.DDP_CUSTOMERNUM" propertyName="Dynamic Document Property - DDP_CUSTOMERNUM"/></decisionvalue><decisionvalue valueType="static"><staticparameter staticproperty="1"/></decisionvalue></decision></configuration><dragpoints><dragpoint identifier="true" name="shape7.dragpoint1" text="True" toShape="shape10" x="1184.0" y="217.0"><linesegment length="0" name="shape7.dragpoint1.lineseg1" orient="horizontal" x="1138.0" y="303.0"/><linesegment length="0" name="shape7.dragpoint1.lineseg2" orient="vertical" x="1138.0" y="303.0"/><linesegment length="31" name="shape7.dragpoint1.lineseg3" orient="horizontal" x="1138.0" y="303.0"/><linesegment length="80" name="shape7.dragpoint1.lineseg4" orient="vertical" x="1169.0" y="223.0"/><linesegment label="True" length="15" name="shape7.dragpoint1.lineseg5" orient="horizontal" x="1169.0" y="223.0"/></dragpoint><dragpoint identifier="false" name="shape7.dragpoint2" text="False" toShape="shape12" x="1184.0" y="393.0"><linesegment length="0" name="shape7.dragpoint2.lineseg1" orient="horizontal" x="1138.0" y="303.0"/><linesegment length="0" name="shape7.dragpoint2.lineseg2" orient="vertical" x="1138.0" y="303.0"/><linesegment length="31" name="shape7.dragpoint2.lineseg3" orient="horizontal" x="1138.0" y="303.0"/><linesegment length="96" name="shape7.dragpoint2.lineseg4" orient="vertical" x="1169.0" y="303.0"/><linesegment label="False" length="15" name="shape7.dragpoint2.lineseg5" orient="horizontal" x="1169.0" y="399.0"/></dragpoint></dragpoints></shape><shape image="documentproperties_icon" name="shape8" shapetype="documentproperties" userlabel="Lookup CUST_ID and set as document property" x="928.0" y="288.0"><configuration><documentproperties><documentproperty defaultValue="" isTradingPartner="false" name="Dynamic Document Property - DDP_CUST_ID" persist="false" propertyId="dynamicdocument.DDP_CUST_ID"><sourcevalues><parametervalue key="1" valueType="sql"><sqlparameter cachevalues="false" connection="22880955-cbe0-4c2c-b5fa-6e9864aa4b3f" outputdatatype="1" outputpos="1"><sqltoexecute>SELECT Count(1) FROM Customer WHERE CustomerNum=?</sqltoexecute><parameters><parametervalue key="0" valueType="profile"><profileelement elementId="3" elementName="Customer Number (Record/Elements/Customer Number)" profileId="6e5f1658-7037-45bc-8542-364d609ed36c" profileType="profile.flatfile"/></parametervalue></parameters></sqlparameter></parametervalue></sourcevalues></documentproperty></documentproperties></configuration><dragpoints><dragpoint name="shape8.dragpoint1" toShape="shape7" x="1088.0" y="297.0"><linesegment length="0" name="shape8.dragpoint1.lineseg1" orient="horizontal" x="962.0" y="303.0"/><linesegment length="0" name="shape8.dragpoint1.lineseg2" orient="vertical" x="962.0" y="303.0"/><linesegment length="71" name="shape8.dragpoint1.lineseg3" orient="horizontal" x="962.0" y="303.0"/><linesegment length="0" name="shape8.dragpoint1.lineseg4" orient="vertical" x="1033.0" y="303.0"/><linesegment length="55" name="shape8.dragpoint1.lineseg5" orient="horizontal" x="1033.0" y="303.0"/></dragpoint></dragpoints></shape><shape image="dataprocess_icon" name="shape9" shapetype="dataprocess" userlabel="Split FF by line to be able to lookup each record separately" x="720.0" y="288.0"><configuration><dataprocess><step index="1" key="1" name="Split Documents" processtype="8"><documentsplit profileType="ff"><SplitOptions><FFOptions batchCount="0" headersOption="retain" linkElementKey="null" splitOption="split_line"/></SplitOptions></documentsplit></step></dataprocess></configuration><dragpoints><dragpoint name="shape9.dragpoint1" toShape="shape8" x="912.0" y="297.0"><linesegment length="0" name="shape9.dragpoint1.lineseg1" orient="horizontal" x="754.0" y="303.0"/><linesegment length="0" name="shape9.dragpoint1.lineseg2" orient="vertical" x="754.0" y="303.0"/><linesegment length="87" name="shape9.dragpoint1.lineseg3" orient="horizontal" x="754.0" y="303.0"/><linesegment length="0" name="shape9.dragpoint1.lineseg4" orient="vertical" x="841.0" y="303.0"/><linesegment length="71" name="shape9.dragpoint1.lineseg5" orient="horizontal" x="841.0" y="303.0"/></dragpoint></dragpoints></shape><shape image="map_icon" name="shape10" shapetype="map" userlabel="" x="1200.0" y="208.0"><configuration><map mapId="30006713-081d-4fbd-a43f-f6040069890d"/></configuration><dragpoints><dragpoint name="shape10.dragpoint1" toShape="shape15" x="1376.0" y="217.0"><linesegment length="0" name="shape10.dragpoint1.lineseg1" orient="horizontal" x="1234.0" y="223.0"/><linesegment length="0" name="shape10.dragpoint1.lineseg2" orient="vertical" x="1234.0" y="223.0"/><linesegment length="79" name="shape10.dragpoint1.lineseg3" orient="horizontal" x="1234.0" y="223.0"/><linesegment length="0" name="shape10.dragpoint1.lineseg4" orient="vertical" x="1313.0" y="223.0"/><linesegment length="63" name="shape10.dragpoint1.lineseg5" orient="horizontal" x="1313.0" y="223.0"/></dragpoint></dragpoints></shape><shape image="map_icon" name="shape12" shapetype="map" userlabel="" x="1200.0" y="384.0"><configuration><map mapId="8eeb6749-a484-4d31-abb7-d85a290e5cd2"/></configuration><dragpoints><dragpoint name="shape12.dragpoint1" toShape="shape13" x="1376.0" y="393.0"><linesegment length="0" name="shape12.dragpoint1.lineseg1" orient="horizontal" x="1234.0" y="399.0"/><linesegment length="0" name="shape12.dragpoint1.lineseg2" orient="vertical" x="1234.0" y="399.0"/><linesegment length="79" name="shape12.dragpoint1.lineseg3" orient="horizontal" x="1234.0" y="399.0"/><linesegment length="0" name="shape12.dragpoint1.lineseg4" orient="vertical" x="1313.0" y="399.0"/><linesegment length="63" name="shape12.dragpoint1.lineseg5" orient="horizontal" x="1313.0" y="399.0"/></dragpoint></dragpoints></shape><shape image="connectoraction_icon" name="shape13" shapetype="connectoraction" userlabel="(View Operation &gt; Profile for statement details)" x="1392.0" y="384.0"><configuration><connectoraction actionType="Send" connectionId="22880955-cbe0-4c2c-b5fa-6e9864aa4b3f" connectorType="database" hideSettings="false" operationId="451ac652-09fd-4ff0-8210-5ac26de96976" parameter-profile="EMBEDDED|databaseparameterchooser|3ad61d6d-9e24-4870-9b74-61b4f8a6361d|451ac652-09fd-4ff0-8210-5ac26de96976"><parameters/></connectoraction></configuration><dragpoints><dragpoint name="shape13.dragpoint1" toShape="shape14" x="1568.0" y="393.0"><linesegment length="0" name="shape13.dragpoint1.lineseg1" orient="horizontal" x="1426.0" y="399.0"/><linesegment length="0" name="shape13.dragpoint1.lineseg2" orient="vertical" x="1426.0" y="399.0"/><linesegment length="79" name="shape13.dragpoint1.lineseg3" orient="horizontal" x="1426.0" y="399.0"/><linesegment length="0" name="shape13.dragpoint1.lineseg4" orient="vertical" x="1505.0" y="399.0"/><linesegment length="63" name="shape13.dragpoint1.lineseg5" orient="horizontal" x="1505.0" y="399.0"/></dragpoint></dragpoints></shape><shape image="stop_icon" name="shape14" shapetype="stop" userlabel="" x="1584.0" y="384.0"><configuration><stop continue="true"/></configuration><dragpoints/></shape><shape image="connectoraction_icon" name="shape15" shapetype="connectoraction" userlabel="(View Operation &gt; Profile for statement details)" x="1392.0" y="208.0"><configuration><connectoraction actionType="Send" connectionId="22880955-cbe0-4c2c-b5fa-6e9864aa4b3f" connectorType="database" hideSettings="false" operationId="bce2e052-5bac-40b0-a99a-a60211bea224" parameter-profile="EMBEDDED|databaseparameterchooser|063ab722-12fa-40ad-adde-bb694c355c4f|bce2e052-5bac-40b0-a99a-a60211bea224"><parameters/></connectoraction></configuration><dragpoints><dragpoint name="shape15.dragpoint1" toShape="shape16" x="1568.0" y="217.0"><linesegment length="0" name="shape15.dragpoint1.lineseg1" orient="horizontal" x="1426.0" y="223.0"/><linesegment length="0" name="shape15.dragpoint1.lineseg2" orient="vertical" x="1426.0" y="223.0"/><linesegment length="79" name="shape15.dragpoint1.lineseg3" orient="horizontal" x="1426.0" y="223.0"/><linesegment length="0" name="shape15.dragpoint1.lineseg4" orient="vertical" x="1505.0" y="223.0"/><linesegment length="63" name="shape15.dragpoint1.lineseg5" orient="horizontal" x="1505.0" y="223.0"/></dragpoint></dragpoints></shape><shape image="stop_icon" name="shape16" shapetype="stop" userlabel="" x="1584.0" y="208.0"><configuration><stop continue="true"/></configuration><dragpoints/></shape><shape image="notify_icon" name="shape17" shapetype="notify" userlabel="Example 1: Simple insert" x="528.0" y="64.0"><configuration><notify disableEvent="true" enableUserLog="false" perExecution="false" title=""><notifyMessage>Example 1: Simple insert</notifyMessage><notifyMessageLevel>INFO</notifyMessageLevel><notifyParameters/></notify></configuration><dragpoints><dragpoint name="shape17.dragpoint1" toShape="shape3" x="688.0" y="73.0"><linesegment length="0" name="shape17.dragpoint1.lineseg1" orient="horizontal" x="562.0" y="79.0"/><linesegment length="0" name="shape17.dragpoint1.lineseg2" orient="vertical" x="562.0" y="79.0"/><linesegment length="71" name="shape17.dragpoint1.lineseg3" orient="horizontal" x="562.0" y="79.0"/><linesegment length="0" name="shape17.dragpoint1.lineseg4" orient="vertical" x="633.0" y="79.0"/><linesegment length="55" name="shape17.dragpoint1.lineseg5" orient="horizontal" x="633.0" y="79.0"/></dragpoint></dragpoints></shape><shape image="notify_icon" name="shape18" shapetype="notify" userlabel="Example 2: Lookup to decide insert vs. update" x="528.0" y="288.0"><configuration><notify disableEvent="true" enableUserLog="false" perExecution="false" title=""><notifyMessage>Example 2: Lookup to decide insert vs. update</notifyMessage><notifyMessageLevel>INFO</notifyMessageLevel><notifyParameters/></notify></configuration><dragpoints><dragpoint name="shape18.dragpoint1" toShape="shape9" x="704.0" y="297.0"><linesegment length="0" name="shape18.dragpoint1.lineseg1" orient="horizontal" x="562.0" y="303.0"/><linesegment length="0" name="shape18.dragpoint1.lineseg2" orient="vertical" x="562.0" y="303.0"/><linesegment length="79" name="shape18.dragpoint1.lineseg3" orient="horizontal" x="562.0" y="303.0"/><linesegment length="0" name="shape18.dragpoint1.lineseg4" orient="vertical" x="641.0" y="303.0"/><linesegment length="63" name="shape18.dragpoint1.lineseg5" orient="horizontal" x="641.0" y="303.0"/></dragpoint></dragpoints></shape></shapes></process></bns:object><bns:processOverrides/></bns:Component>