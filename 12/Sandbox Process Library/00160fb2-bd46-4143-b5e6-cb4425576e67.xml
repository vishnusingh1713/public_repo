<?xml version="1.0" encoding="UTF-8" standalone="yes"?><bns:Component xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bns="http://api.platform.boomi.com/" folderFullPath="Cgfns International, Inc./Sandbox Process Library" componentId="00160fb2-bd46-4143-b5e6-cb4425576e67" version="1" name="Database Basics: Insert into Multiple Tables with Commit Options" type="process" createdDate="2019-08-21T18:28:41Z" createdBy="gtopakas@cgfns.org" modifiedDate="2019-08-21T18:28:41Z" modifiedBy="gtopakas@cgfns.org" deleted="false" currentVersion="true" folderName="Sandbox Process Library" folderId="RjoyNjI3MDU5" copiedFromComponentId="ee1a39ee-8725-40ea-ab52-2b74d6201bda" copiedFromComponentVersion="4" branchName="main" branchId="QjoyNDQyNTI"><bns:encryptedValues/><bns:description>This process demonstrates using a multi-statement database profile and commit options to write to multiple database tables within a single transaction commit. In this example, sales order records need to be inserted into both an orderheader table and an orderdetail table. The incoming data is first split using a Link Element to put group each logical order (which can span multiple lines in the file) into a separate document. This split is necessary to allow the records to be committed individually later. The flat file data is mapped to the database profile. Note the database profile is configured with one statement for the header data and a second nested child statement for the detail data. IMPORTANT: In the database profile, the OrderNum field in the header statement is configured to Enforce Unique to prevent duplicate entries because of the repeated order header values in the source data. Finally the database insert operation is configured with Commit Options="Commit By Profile" and Batch Count=1. This means the multiple header and detail INSERT statements generated for a single logical order will be committed together to avoid orphan rows.</bns:description><bns:object><process xmlns="" allowSimultaneous="false" enableUserLog="false" processLogOnErrorOnly="false" purgeDataImmediately="false" updateRunDates="false" workload="general"><shapes><shape image="start" name="shape1" shapetype="start" userlabel="(In practice source data would come from some application)" x="48.0" y="160.0"><configuration><noaction/></configuration><dragpoints><dragpoint identifier="0" name="shape1.dragpoint1" toShape="shape6" x="240.0" y="169.0"><linesegment length="0" name="shape1.dragpoint1.lineseg1" orient="horizontal" x="82.0" y="175.0"/><linesegment length="0" name="shape1.dragpoint1.lineseg2" orient="vertical" x="82.0" y="175.0"/><linesegment length="87" name="shape1.dragpoint1.lineseg3" orient="horizontal" x="82.0" y="175.0"/><linesegment length="0" name="shape1.dragpoint1.lineseg4" orient="vertical" x="169.0" y="175.0"/><linesegment length="71" name="shape1.dragpoint1.lineseg5" orient="horizontal" x="169.0" y="175.0"/></dragpoint></dragpoints></shape><shape image="connectoraction_icon" name="shape3" shapetype="connectoraction" userlabel="(View Operation &gt; Profile for statement details)" x="832.0" y="160.0"><configuration><connectoraction actionType="Send" connectionId="22880955-cbe0-4c2c-b5fa-6e9864aa4b3f" connectorType="database" hideSettings="false" operationId="1a954823-c8cc-4f5a-b979-27bbbc586b70"><parameters/></connectoraction></configuration><dragpoints><dragpoint identifier="0" name="shape3.dragpoint1" toShape="shape5" x="1008.0" y="169.0"><linesegment length="0" name="shape3.dragpoint1.lineseg1" orient="horizontal" x="866.0" y="175.0"/><linesegment length="0" name="shape3.dragpoint1.lineseg2" orient="vertical" x="866.0" y="175.0"/><linesegment length="79" name="shape3.dragpoint1.lineseg3" orient="horizontal" x="866.0" y="175.0"/><linesegment length="0" name="shape3.dragpoint1.lineseg4" orient="vertical" x="945.0" y="175.0"/><linesegment length="63" name="shape3.dragpoint1.lineseg5" orient="horizontal" x="945.0" y="175.0"/></dragpoint></dragpoints></shape><shape image="map_icon" name="shape4" shapetype="map" x="640.0" y="160.0"><configuration><map mapId="10d9c234-7269-4d70-a692-87e30bc21f6f"/></configuration><dragpoints><dragpoint identifier="0" name="shape4.dragpoint1" toShape="shape3" x="816.0" y="169.0"><linesegment length="0" name="shape4.dragpoint1.lineseg1" orient="horizontal" x="674.0" y="175.0"/><linesegment length="0" name="shape4.dragpoint1.lineseg2" orient="vertical" x="674.0" y="175.0"/><linesegment length="79" name="shape4.dragpoint1.lineseg3" orient="horizontal" x="674.0" y="175.0"/><linesegment length="0" name="shape4.dragpoint1.lineseg4" orient="vertical" x="753.0" y="175.0"/><linesegment length="63" name="shape4.dragpoint1.lineseg5" orient="horizontal" x="753.0" y="175.0"/></dragpoint></dragpoints></shape><shape image="stop_icon" name="shape5" shapetype="stop" x="1024.0" y="160.0"><configuration><stop continue="true"/></configuration><dragpoints/></shape><shape image="message_icon" name="shape6" shapetype="message" userlabel="Sales Order Test Data" x="256.0" y="160.0"><configuration><message combined="false"><msgTxt>Order Number*Order Date*Customer Number*Customer Name*Line Number*Item Number*Quantity
123*20160830*44*Customer ABC*1*555*3
123*20160830*44*Customer ABC*2*888*10
456*20160830*300*Customer XYZ*1*555*3
456*20160830*300*Customer XYZ*2*888*10
456*20160830*300*Customer XYZ*3*784*77
</msgTxt><msgParameters/></message></configuration><dragpoints><dragpoint name="shape6.dragpoint1" toShape="shape10" x="416.0" y="169.0"><linesegment length="0" name="shape6.dragpoint1.lineseg1" orient="horizontal" x="290.0" y="175.0"/><linesegment length="0" name="shape6.dragpoint1.lineseg2" orient="vertical" x="290.0" y="175.0"/><linesegment length="71" name="shape6.dragpoint1.lineseg3" orient="horizontal" x="290.0" y="175.0"/><linesegment length="0" name="shape6.dragpoint1.lineseg4" orient="vertical" x="361.0" y="175.0"/><linesegment length="55" name="shape6.dragpoint1.lineseg5" orient="horizontal" x="361.0" y="175.0"/></dragpoint></dragpoints></shape><shape image="dataprocess_icon" name="shape10" shapetype="dataprocess" userlabel="FF Split by Order (to allow commit per logical order later)" x="432.0" y="160.0"><configuration><dataprocess><step index="1" key="1" name="Split Documents" processtype="8"><documentsplit profileType="ff"><SplitOptions><FFOptions batchCount="1" headersOption="retain" linkElementKey="4" linkElementName="Order Number (Record/Elements/Order Number)" profileId="80b4225f-92bd-4572-bc24-2a2e10edab77" splitOption="split_profile"/></SplitOptions></documentsplit></step></dataprocess></configuration><dragpoints><dragpoint name="shape10.dragpoint1" toShape="shape4" x="624.0" y="169.0"><linesegment length="0" name="shape10.dragpoint1.lineseg1" orient="horizontal" x="466.0" y="175.0"/><linesegment length="0" name="shape10.dragpoint1.lineseg2" orient="vertical" x="466.0" y="175.0"/><linesegment length="87" name="shape10.dragpoint1.lineseg3" orient="horizontal" x="466.0" y="175.0"/><linesegment length="0" name="shape10.dragpoint1.lineseg4" orient="vertical" x="553.0" y="175.0"/><linesegment length="71" name="shape10.dragpoint1.lineseg5" orient="horizontal" x="553.0" y="175.0"/></dragpoint></dragpoints></shape></shapes></process></bns:object><bns:processOverrides/></bns:Component>